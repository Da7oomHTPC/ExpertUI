<!-- Device Management -->
<div class="panel panel-default panel-highlighted">
    <div class="panel-heading"><i class="fa fa-cubes"></i> {{_t('nm_device_management')}}</div>
    <div class="panel-body">
        <!-- Secure/Unsecure  -->
        <div class="cfg-block" ng-controller="SetSecureInclusionController">
            {{_t('nm_force_unsecure')}}
            <div class="btn-group">
                <!-- Secure -->
                <button type="button" class="btn btn-primary" id="btn_force_secure_lock"
                        ng-class="controlDh.controller.secureInclusion ? 'active' : ''"
                        ng-click="setSecureInclusion('controller.data.secureInclusion=true')"
                        ng-disabled="[1, 2, 3, 4, 5, 6, 7].indexOf(controlDh.controller.controllerState) > -1 || rowSpinner['controller.data.secureInclusion=true']">
                    <bb-row-spinner
                            spinner="rowSpinner['controller.data.secureInclusion=true']"
                            label="_t('btn_secure')"
                            icon="'fa-lock'">
                    </bb-row-spinner>
                </button>
                <!-- Unsecure -->
                <button type="button" class="btn btn-primary" id="btn_force_unsecure_lock"
                        ng-class="!controlDh.controller.secureInclusion ? 'active' : ''"
                        ng-click="setSecureInclusion('controller.data.secureInclusion=false')"
                        ng-disabled="[1, 2, 3, 4, 5, 6, 7].indexOf(controlDh.controller.controllerState) > -1 || rowSpinner['controller.data.secureInclusion=false']">
                    <bb-row-spinner
                            spinner="rowSpinner['controller.data.secureInclusion=false']"
                            label="_t('btn_unsecure')"
                            icon="'fa-unlock'">
                    </bb-row-spinner>
                </button>
            </div>
        </div>

        <!-- Include/Exclude  -->
        <div class="cfg-block" ng-controller="IncludeExcludeDeviceController">
            <!-- Basic info  -->
            <p class="input-help" ng-show="controlDh.controller.isSIS || controlDh.controller.isPrimary">
                {{_t('nm_learn_mode_you_are_primary_no_sis')}}</p>
            <p class="input-help" ng-show="!controlDh.controller.isSIS && !controlDh.controller.isPrimary">
                {{_t('nm_learn_mode_you_are_secondary_can_not_add')}}</p>
            <div ng-hide="controlDh.inclusion.lastIncludedDevice.message || controlDh.inclusion.lastExcludedDevice.message">
                <!-- Info about siss/primary  -->
                <bb-alert alert="controlDh.inclusion.alertPrimary"></bb-alert>
                <!-- Controller status  -->
                <bb-alert alert="controlDh.inclusion.alert"></bb-alert>
            </div>
            <!-- Inclusion success  -->
            <bb-alert alert="controlDh.inclusion.lastIncludedDevice"></bb-alert>
            <!--<div class="alert alert-success" ng-if="controlDh.inclusion.lastIncludedDevice">
                <p ng-bind-html="controlDh.inclusion.lastIncludedDevice | toTrusted"></p>
            </div>-->
            <!-- Exclusion success  -->
            <bb-alert alert="controlDh.inclusion.lastExcludedDevice"></bb-alert>
            <!--<div class="alert alert-success" ng-if="controlDh.inclusion.lastExcludedDevice">
                <p ng-bind-html="controlDh.inclusion.lastExcludedDevice | toTrusted"></p>
            </div>-->
            <!-- include start -->
            <button class="btn btn-primary" id="btn_nm_include_start" title="{{_t('nm_include_start_tooltip')}}"
                    ng-disabled="[5, 6, 7, 20].indexOf(controlDh.controller.controllerState) > -1 || (!controlDh.controller.isRealPrimary && !controlDh.controller.isSIS)"
                    ng-show="[1, 2, 3, 4].indexOf(controlDh.controller.controllerState) == -1"
                    ng-click="addNodeToNetwork('controller.AddNodeToNetwork(1)')">
                <i class="fa fa-play-circle"></i> {{_t('nm_include_start')}}
            </button>
            <!-- include stop -->
            <button
                    class="btn btn-danger"
                    id="btn_nm_include_stop"
                    ng-show="[1, 2, 3, 4].indexOf(controlDh.controller.controllerState) > -1"
                    ng-click="addNodeToNetwork('controller.AddNodeToNetwork(0)')">
                <i class="fa fa-stop-circle"></i> {{_t('nm_include_stop')}}
            </button>
            <!-- exclude start -->
            <button class="btn btn-info" id="nm_exclude_start" title="{{_t('nm_exclude_start_tooltip')}}"
                    ng-disabled="[1, 2, 3, 4, 20].indexOf(controlDh.controller.controllerState) > -1 || (!controlDh.controller.isRealPrimary && !controlDh.controller.isSIS)"
                    ng-show="[5, 6, 7].indexOf(controlDh.controller.controllerState) == -1"
                    ng-click="removeNodeToNetwork('controller.RemoveNodeFromNetwork(1)')">
                <i class="fa fa-play-circle"></i> {{_t('nm_exclude_start')}}
            </button>
            <!-- exclude stop -->
            <button class="btn btn-danger" id="nm_exclude_stop"
                    ng-show="[5, 6, 7].indexOf(controlDh.controller.controllerState) > -1"
                    ng-click="removeNodeToNetwork('controller.RemoveNodeFromNetwork(0)')">
                <i class="fa fa-stop-circle"></i> {{_t('nm_exclude_stop')}}
            </button>
        </div>
        <pre>{{controlDh.inclusion|json}}</pre>
        <a href="" ng-click="showInclusionModal('inclusionModal1')">Show POPUP 1</a> | <a href="" ng-click="showInclusionModal('inclusionModal2')">Show POPUP 2</a>
    </div>
</div>

<!-- inclusionModal1 -->
<div id="inclusionModal1" class="appmodal" ng-if="controlDh.inclusion.popup === 'inclusionModal1'">
    <div class="appmodal-in">
        <div class="appmodal-header">
                <span class="appmodal-close" ng-click="closeInclusionModal()"><i
                        class="fa fa-times"></i></span>
            <h3>{{_t(' POPUP 1 headline')}}</h3>
        </div>
        <div class="appmodal-body">
           POPUP 1 text Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue.

        </div>
         <div class="appmodal-footer">
             <!-- OK -->
             <button type="button" class="btn btn-submit">
                 <i class="fa fa-check"></i> <span class="btn-name">{{_t('ok')}}</span>
             </button>
         </div>
    </div>
</div><!-- /#inclusionModal1 -->

<!-- inclusionModal2 -->
<div id="inclusionModal2" class="appmodal" ng-if="controlDh.inclusion.popup === 'inclusionModal2'">
    <div class="appmodal-in">
        <div class="appmodal-header">
                <span class="appmodal-close" ng-click="closeInclusionModal()"><i
                        class="fa fa-times"></i></span>
            <h3>{{_t(' POPUP 2 headline')}}</h3>
        </div>
        <div class="appmodal-body">
            POPUP 2 text Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.

        </div>
        <div class="appmodal-footer">
            <!-- Cancel -->
            <button type="button" class="btn btn-default" ng-click="closeInclusionModal()">
                <i class="fa fa-times text-danger"></i> <span class="btn-name">{{_t('btn_cancel')}}</span>
            </button>
            <!-- Confirm -->
            <button type="button" class="btn btn-submit">
                <i class="fa fa-check"></i> <span class="btn-name">{{_t('confirm')}}</span>
            </button>
        </div>
    </div>
</div><!-- /#inclusionModal1 -->

