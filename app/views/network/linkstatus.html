<!-- Link health -->
<div ng-controller="LinkStatusController">
    <div class="page-header"><h1>{{_t('nav_linkhealth_info')}}</h1></div>
    <!--<pre>{{linkStatus.pwLvlData}}</pre>-->
    <!--<pre>{{linkStatus.pwLvlTested}}</pre>-->

    <bb-alert alert="alert"></bb-alert>
    <div id="table_mobile" ng-if="linkStatus.show">
            <table id="RoutingTable" class="table table-striped table-condensed table-hover">
                <thead class="cf">
                <tr>
                    <th>
                        <a href="" ng-click="orderBy('id')">#
                            <span ng-show="predicate == 'id'"><i ng-show="!reverse" class="fa fa-sort-asc"></i><i ng-show="reverse" class="fa fa-sort-desc"></i></span>
                        </a>
                    </th>
                    <th>
                        <a href="" ng-click="orderBy('name')">{{ _t('device_name')}}
                            <span ng-show="predicate == 'name'"><i ng-show="!reverse" class="fa fa-sort-asc"></i><i ng-show="reverse" class="fa fa-sort-desc"></i></span>
                        </a>
                    </th>
                    <th>
                        <a href="" ng-click="orderBy('type')">{{_t('device_description_device_type')}}
                            <span ng-show="predicate == 'type'"><i ng-show="!reverse" class="fa fa-sort-asc"></i><i ng-show="reverse" class="fa fa-sort-desc"></i></span>
                        </a>
                    </th>
                    <th>
                        <a href="" ng-click="orderBy('updateTime')">{{ _t('datetime')}}
                            <span ng-show="predicate == 'updateTime'"><i ng-show="!reverse" class="fa fa-sort-asc"></i><i ng-show="reverse" class="fa fa-sort-desc"></i></span>
                        </a>
                    </th>
                   <!-- <th>
                        {{ _t('linkquality')}}
                    </th>-->
                    <th ng-repeat="pl in linkStatus.pwLvl" style="text-align:center;">{{pl}}</th>
                    <th class="mobile-show">&nbsp;
                        <!--<button class="btn btn-primary" id="btn_test_all_1"
                                ng-click="testAllLinks('all_1')"
                                ng-disabled="rowSpinner['all_1']">
                            <bb-row-spinner
                                    icon="'fa-circle-o'"
                                    spinner="rowSpinner['all_1']"
                                    label="_t('test_all_links')">
                            </bb-row-spinner>
                        </button>-->
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="v in linkStatus.all| orderBy:predicate:reverse track by $index" id="{{v.rowId}}">
                    <td data-title="#">
                        {{ v.id}}
                    </td>
                    <td data-title="{{ _t('device_description_device_type')}}">
                        {{ v.name}}
                    </td>
                    <td data-title="{{ _t('type')}}" title="{{v.type}}">
                        <i class="fa" ng-class="v.icon" title="{{_t(v.type)}}"></i>
                    </td>
                    <td data-title="{{ _t('datetime')}}">
                        <bb-date-time ng-if="v.dateTime" obj="v.dateTime" updated="v.isUpdated"></bb-date-time>
                        <span ng-if="!v.dateTime">-</span>
                    </td>
                    <td class="rtCell" ng-repeat="n in linkStatus.pwLvlData[v.id] track by $index">
                        <div class="rtDiv {{n.color}}" title="{{n}}"
                             ng-class="{
                             'rtGray': n == 0,
                              'rtRed': n > 0 && n < 50,
                              'rtOrange': n > 50 && n < 100,
                              'rtGreen': n > 99
                             }"><i class="fa fa-check" ng-if="linkStatus.pwLvlTested.indexOf(v.id) > -1"></i>&nbsp;
                        </div>
                    </td>
                    <td class="td-action" data-title="">
                        <!-- Test node -->
                        <!--{{v | json}}-->
                        <button class="btn btn-primary" id="btn_test_{{ v.id}}"
                                ng-click="runZwaveTestNode(v)"
                                ng-disabled="rowSpinner[v.paramsTestNode]">
                            <bb-row-spinner
                                    icon="'fa-circle-o'"
                                    spinner="rowSpinner[v.paramsTestNode]"
                                    label="_t('test_link')">
                            </bb-row-spinner>
                        </button>
                        <!-- NOP -->
                        <!--<button class="btn btn-default" id="btn_nop_{{ v.id}}"
                                ng-if="!v.hasPowerLevel"
                                ng-click="runZwaveNop(v.cmdNop)"
                                ng-disabled="rowSpinner[v.cmdNop]">
                            <bb-row-spinner
                                    icon="'fa-circle-o text-success'"
                                    spinner="rowSpinner[v.cmdNop]"
                                    label="_t('nop')">
                            </bb-row-spinner>
                        </button>-->

                    </td>
                </tr>
                </tbody>
            </table>
        </div>

<div id="RoutingComments">
    <i class="fa fa-square fa-lg gray"></i> {{_t('Unavailable')}}<br/>
    <i class="fa fa-square fa-lg green"></i> {{_t('dBm 100%')}}<br/>
    <i class="fa fa-square fa-lg orange"></i> {{_t('dBm from 50% to 99%')}}<br/>
    <i class="fa fa-square fa-lg red"></i> {{_t('dBm from 1% to 50%')}}<br/>

</div>
<!-- linkStatusModal -->
<div ng-include="'app/views/network/linkstatus_modal.html'"></div>
</div><!-- /ng-controler -->
