<!-- Routing view -->
<div ng-controller="RoutingController">
    <div class="page-header"><h1>Routing</h1></div>
    <div class="table-responsive">
    <table id="RoutingTable" class="table table-striped">
        <thead>
            <tr>
                <th class="rtHeader">{{ _t('device_name')}}</th>
                <th class="rtHeader">{{ _t('rt_header_node_id')}}</th>
                <th ng-repeat="d in devices" style="text-align:center;">{{d}}</th>
                <th class="rtHeader">{{ _t('rt_header_update_time')}}</th>
                <th><button 
                    class="btn btn-primary update" 
                    data-ng-click="updateAll()"
                    data-action="updateAll"  
                    id="btn_update_all_1"
                    ng-disabled="updating"
                    >{{ _t('rt_update_nodes_neightbours')}}
                </button>&nbsp;<btn-spinner></btn-spinner></th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="d in devices">
                <td>{{nodes[d].label}}</td>
                <td>{{d}}</td>
                <td ng-repeat="n in devices" class="rtCell"><div id="cell{{d}}-{{n}}" class="{{data[d][n].clazz}}"><span class="info">{{data[d][n].info}}</span></div></td>
                <td><span id="update{{d}}" class="{{nodes[d].node.data.neighbours| getUpdated}}">{{nodes[d].node.data.neighbours.updateTime| getTime}}</span></td>
                <td ng-if="nodes[d].node | updateable :d"><button class="btn btn-primary update"
                    data-ng-click="update(d)" ng-disabled="updating">{{ _t('update')}}</button></td>
            </tr>
        </tbody>
    </table>
    </div>
    <button class="btn btn-primary" data-toggle="tab" data-target="#modal_log" ng-disabled="log.length == 0">Log</button>
     <!-- Non-Modal log -->
    <div class="modal fade" id="modal_log" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Log</h4>
                </div>
               <div class="modal-body">
                    <div ng-repeat="line in log track by $index">{{line}}</div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary update" data-ng-click="downloadLog()" ng-disabled="log == ''">Download</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div><!-- /.Non-Modal -->
</div>
