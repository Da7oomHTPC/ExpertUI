<!-- Network Maintenance -->
<div class="panel panel-default">
    <div class="panel-heading"><i class="fa fa-sitemap"></i> {{_t('nm_net_maintance')}}</div>
    <div class="panel-body">
        <div>
            <!-- remove_failed_node -->
            <div class="cfg-block form-inline">
                <p class="input-help">{{_t('nm_remove_node_war')}}</p>
                <select
                        name="remove_failed_node"
                        id="remove_failed_node"
                        class="form-control"
                        ng-disabled="[1, 2, 3, 4, 5, 6, 7, 20].indexOf(controllerState) > -1"
                        ng-change="changeSelectNode(modelNodeFailed)"
                        ng-model="modelNodeFailed">
                    <option value="">---</option>
                    <option ng-repeat="v in failedNodes" value="{{v.id}}">{{v.id}}</option>
                </select>
                <button
                        class="btn btn-primary"
                        id="btn_remove_failed_mode"
                        ng-click="showModal('#modal_failed_node', modelNodeFailed)"
                        ng-disabled="!modelNodeFailed"
                >{{_t('nm_remove_failed')}}</button>

            </div>

            <!-- replace_failed_node -->
            <div class="cfg-block form-inline">
                <p class="input-help">{{_t('nm_replace_node_war')}}</p>
                <div class="alert nm-response alert-danger" ng-show="[17, 18].indexOf(controllerState) != -1">{{_t('nm_controller_state_' + controllerState)}}</div>
                <select
                        name="replace_failed_node"
                        id="replace_failed_node"
                        class="form-control"
                        ng-disabled="[1, 2, 3, 4, 5, 6, 7, 20].indexOf(controllerState) > -1"
                        ng-change="changeSelectNode(modelReplaceNode)"
                        ng-model="modelReplaceNode">
                    <option value="">---</option>
                    <option ng-repeat="v in replaceNodes" value="{{v.id}}">{{v.id}}</option>
                </select>
                <button
                        class="btn btn-primary"
                        id="btn_replace_failed_node"
                        ng-disabled="!modelReplaceNode"
                        ng-click="runCmd('ReplaceFailedNode(' + modelReplaceNode + ')', null, null, {'name': 'remove_option', 'id': '#replace_failed_node', 'value': modelReplaceNode})"
                >{{_t('nm_replace_node')}}</button>

            </div>

            <!-- mark_battery_failed -->
            <div class="cfg-block form-inline">
                <p class="input-help">{{_t('nm_mark_node_war')}}</p>
                <select
                        name="mark_battery_failed"
                        id="mark_battery_failed"
                        class="form-control"
                        ng-disabled="[1, 2, 3, 4, 5, 6, 7, 20].indexOf(controllerState) > -1"
                        ng-change="changeSelectNode(modelBatteryFailed)"
                        ng-model="modelBatteryFailed">
                    <option value="">---</option>
                    <option ng-repeat="v in failedBatteries" value="{{v.id}}">{{v.id}}</option>
                </select>
                <button
                        class="btn btn-primary"
                        ng-disabled="!modelBatteryFailed"
                        ng-click="showModal('#modal_battery_node')"
                >{{_t('nm_mark_battery_as_failed')}}</button>

            </div>
        </div>
        <div>
            <!-- controller_change_start -->
            <div class="cfg-block form-inline">
                <p class="input-help">{{_t('nm_change_controller_war')}}</p>
                <div class="nm-response"  ng-class="controllerState == 0 ? 'text-info' : 'text - danger'" ng-show="[13, 14, 15, 16].indexOf(controllerState) > -1">
                    {{_t('nm_controller_state_' + controllerState)}}
                </div>
                <button class="btn btn-primary"
                        id="btn_controller_change_start"
                        ng-disabled="[1, 2, 3, 4, 5, 6, 7, 20].indexOf(controllerState) > -1 || isPrimary == false"
                        ng-show="[13, 14, 15, 16].indexOf(controllerState) == -1"
                        ng-click="runCmd('controller.ControllerChange(1)')"
                >{{_t('nm_controller_change_start')}}</button>
                <button class="btn btn-danger"
                        id="btn_controller_change_stop"
                        ng-show="[13, 14, 15, 16].indexOf(controllerState) > -1"
                        ng-click="runCmd('controller.ControllerChange(0)')"
                > {{_t('nm_controller_change_stop')}}</button>
            </div>

            <!-- learn_start -->
            <div class="cfg-block form-inline" ng-if="cfg.app_type === 'default'">
                <p class="input-help">{{_t('nm_learn_mode_war')}}</p>
                <div class="nm-response"  ng-class="controllerState == 0 ? 'text-info' : 'text - danger'" ng-show="[8, 9, 10, 11, 12].indexOf(controllerState) > -1">
                    {{_t('nm_controller_state_' + controllerState)}}
                </div>
                <button
                        class="btn btn-primary"
                        id="btn_learn_start"
                        ng-disabled="[20].indexOf(controllerState) > -1 || startLearnMode == false"
                        ng-click="runCmd('controller.SetLearnMode(1)')"
                        ng-show="[8, 9, 10, 11, 12].indexOf(controllerState) == -1"
                >{{_t('nm_learn_start')}}</button>
                <button
                        class="btn btn-danger"
                        id="btn_learn_stop"
                        ng-show="[8, 9, 10, 11, 12].indexOf(controllerState) > -1"
                        ng-click="runCmd('controller.SetLearnMode(0)')"
                > {{_t('nm_learn_stop')}}</button>
            </div>

            <!-- request_nif -->
            <div class="cfg-block form-inline">
                <p class="input-help">{{_t('nm_nif_all_war')}}</p>
                <button class="btn btn-primary"
                        id="btn_request_nif"
                        ng-disabled="[1, 2, 3, 4, 5, 6, 7, 20].indexOf(controllerState) > -1"
                        ng-click="requestNifAll('#btn_request_nif')"
                >{{_t('nm_request_all_node_information')}}</button>
            </div>
        </div>
    </div>
</div>

